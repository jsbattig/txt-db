{
  "id": "txt-db:diff:266684124654cd11e8611089643cfdb1d41b936e:TxtDb.Storage.Tests/Async/AsyncCancellationTests.cs:2",
  "vector": [
    -0.015479257,
    0.001422096,
    0.004901342,
    0.053600732,
    -0.015296742,
    0.008228366,
    -0.025617689,
    -0.004033197,
    0.037343688,
    0.008815869,
    0.020379106,
    -0.004746045,
    0.06827379,
    0.007543559,
    -0.078233331,
    -0.029495301,
    0.042692374,
    0.000192192,
    -0.036630057,
    -0.002187822,
    -0.032013062,
    -0.048272889,
    -0.039680507,
    0.103678547,
    -0.040572185,
    -0.005970791,
    0.018253976,
    0.030963393,
    0.003202719,
    0.058319859,
    0.000373574,
    -0.066981882,
    0.014422329,
    0.038539857,
    0.020520162,
    -0.003246818,
    -0.01475661,
    -0.005390302,
    -0.039956309,
    0.024970451,
    0.024185697,
    0.006852688,
    0.064047657,
    -0.028460946,
    0.021587728,
    -0.054746032,
    0.000102905,
    0.015757266,
    0.003039943,
    0.026302731,
    -0.002688676,
    0.033837803,
    -0.028128276,
    0.06476742,
    0.012006652,
    -0.040227097,
    0.07150355,
    0.038145199,
    -0.048709549,
    0.055778023,
    -0.020249646,
    -0.018874204,
    0.016517773,
    0.007250216,
    -0.037283421,
    -0.044999719,
    -0.022825213,
    0.075663246,
    0.011137323,
    -0.065331943,
    0.014704457,
    0.025214856,
    0.008418289,
    0.048067011,
    0.038683452,
    0.038722821,
    0.06260059,
    0.024886958,
    0.03220015,
    -0.00715178,
    -0.044989105,
    -0.052050527,
    -0.003082299,
    -0.034839418,
    0.028704731,
    -0.036539633,
    0.02829513,
    -0.056755126,
    0.004447061,
    -0.001858566,
    -0.000963713,
    0.02441263,
    0.021805273,
    0.031532027,
    0.001959705,
    0.030239426,
    0.005416643,
    0.002649357,
    0.029373594,
    -0.034442261,
    -0.042093612,
    -0.002247396,
    -0.040606424,
    0.048683587,
    -0.06517531,
    -0.004726366,
    -0.004466282,
    -0.04054033,
    0.002091704,
    0.015720069,
    0.016696097,
    0.020099549,
    0.013210125,
    0.031856209,
    0.041553691,
    -0.009518893,
    -0.007543838,
    -0.020778934,
    0.041946042,
    0.057070836,
    -0.00738424,
    -0.008713349,
    -0.017319912,
    0.050478727,
    -0.060023982,
    0.022327015,
    0.020264236,
    0.013574001,
    -0.011285233,
    -0.027651729,
    0.012354529,
    -0.015604809,
    0.004085277,
    0.004670357,
    0.01228924,
    0.04245599,
    0.029887343,
    0.03878263,
    -0.020799223,
    -0.01349133,
    0.042891234,
    0.00113333,
    0.01622618,
    0.023061231,
    -0.033520699,
    -0.002657857,
    0.037892163,
    -0.011341773,
    0.008955803,
    -0.080389909,
    -0.006244685,
    0.050024517,
    -0.044319183,
    0.039169181,
    0.01862761,
    0.010317815,
    -0.02199113,
    -0.02846621,
    0.006982225,
    -0.03580128,
    -0.027256191,
    0.037470605,
    0.020647133,
    -0.011016952,
    -0.051198192,
    0.058327962,
    -0.018928507,
    0.005756048,
    0.011033372,
    -0.050773878,
    -0.059389211,
    0.046838488,
    -0.031438425,
    -0.023185413,
    -0.018375019,
    0.011597428,
    0.031665809,
    0.016627304,
    -0.085989691,
    -0.046660159,
    0.020391166,
    0.004409586,
    -0.018038649,
    0.021732125,
    -0.004643887,
    -0.006339682,
    0.034660604,
    0.020902978,
    0.010917503,
    0.010132494,
    -0.0146119,
    0.01588434,
    -0.063880287,
    -0.01733193,
    0.022147458,
    -0.01711829,
    -0.007573744,
    -0.010371225,
    0.031334214,
    0.035869736,
    0.003704987,
    0.034887038,
    -0.081723146,
    -0.00095022,
    0.009428198,
    -0.000140928,
    -0.040091261,
    -0.024186745,
    0.004870035,
    -0.009731175,
    0.007076999,
    -0.034667015,
    -0.012525238,
    -0.038563531,
    -0.00666625,
    0.015384676,
    -0.050507031,
    0.030805435,
    0.051341817,
    0.001354987,
    -0.001705539,
    0.004562704,
    0.036410388,
    0.050735801,
    0.001463596,
    -0.034136984,
    -0.068891026,
    -0.033152793,
    -0.02409344,
    -0.032073814,
    0.006722498,
    -0.053642966,
    0.026539659,
    -0.02744839,
    -0.057349849,
    0.052653398,
    0.01621668,
    -0.021962065,
    -0.023643604,
    0.014269254,
    0.006049451,
    0.035048183,
    0.022331921,
    -0.011918226,
    -0.041796606,
    0.01404019,
    0.071702994,
    -0.001853826,
    0.024412768,
    -0.010959426,
    -0.077824511,
    0.036270998,
    -0.031077405,
    0.060675524,
    0.053173412,
    0.015535941,
    -0.021455789,
    -0.007182378,
    0.019367054,
    0.014240121,
    -0.002936759,
    0.012868732,
    -0.040874783,
    0.014360123,
    -0.024425799,
    0.013153045,
    0.009867298,
    -0.005992156,
    -0.038056761,
    0.061621655,
    0.014351115,
    0.002103175,
    0.03830367,
    -0.001509079,
    0.009116352,
    -0.023073403,
    0.004157426,
    0.04339692,
    0.00907027,
    0.003605315,
    -0.050877694,
    -0.016365724,
    0.014931849,
    -0.014212002,
    -0.01554224,
    -0.026586946,
    0.056919608,
    -0.005428275,
    0.034798503,
    0.019860417,
    0.016204998,
    -0.023520339,
    -0.01959005,
    -0.017751468,
    0.046238113,
    0.016855551,
    0.019734686,
    -0.028643869,
    0.012578019,
    -0.024548337,
    -0.011123357,
    0.002921244,
    0.06289883,
    0.004167289,
    0.01745257,
    0.013512863,
    0.023742469,
    -0.04392064,
    0.01378973,
    -0.022274103,
    -0.053296473,
    0.010995701,
    0.021884048,
    -0.000225982,
    0.013015551,
    -0.034245912,
    -0.025969354,
    -0.005232495,
    -0.046484217,
    0.021329055,
    0.003272377,
    -0.009679941,
    0.031639677,
    -0.065865286,
    -0.006294244,
    0.009930803,
    -0.068344064,
    -0.024745941,
    0.025804071,
    -0.027976757,
    -0.04484405,
    0.046320807,
    0.005152951,
    0.052881617,
    -0.005384001,
    0.015447518,
    -0.005732037,
    0.014933551,
    -0.004672946,
    0.002732206,
    -0.007487641,
    -0.019145414,
    0.000521331,
    -0.022746384,
    0.07352265,
    -0.023869522,
    0.000783377,
    -0.045196343,
    -0.032976571,
    0.037246156,
    -0.005932819,
    -0.051913925,
    0.007182961,
    -0.020956874,
    -0.041904688,
    0.026421079,
    -0.023602374,
    0.011849787,
    -0.001105172,
    0.029335691,
    0.002444996,
    0.022119958,
    -0.048203856,
    -0.013185175,
    -0.016411589,
    -0.016201818,
    -0.025574677,
    0.049867872,
    -0.010621727,
    0.021706278,
    -0.045451317,
    -0.047640387,
    -0.041676424,
    0.014958346,
    -0.018856911,
    0.013319074,
    0.032363255,
    -0.01388324,
    0.002265353,
    -0.023090051,
    0.005618383,
    0.00741409,
    0.000488358,
    -0.004102264,
    0.021209847,
    -0.009344331,
    0.000931987,
    0.006729378,
    -0.00761296,
    0.073165789,
    -0.006639375,
    0.023839198,
    -0.010383832,
    0.000859613,
    -0.010848305,
    -0.022061421,
    -0.015900344,
    0.028266314,
    0.037645429,
    -0.026055677,
    0.042099848,
    -0.015214338,
    0.021544913,
    -0.057880662,
    0.043719701,
    -0.010499067,
    0.02083659,
    0.065256327,
    0.013060302,
    0.022899471,
    0.005505534,
    0.040265996,
    -0.003442111,
    0.009574169,
    -0.020969771,
    0.065060899,
    -0.026478969,
    0.000678654,
    0.000897588,
    -0.023139605,
    0.003392887,
    -0.040878564,
    -0.001185525,
    0.027506607,
    -0.035463132,
    0.000473931,
    0.006507315,
    -0.105684072,
    -0.054767605,
    -0.008501209,
    0.018954055,
    0.020794144,
    -0.056431007,
    0.024760993,
    0.034786791,
    -0.0394249,
    0.015988229,
    -0.009189554,
    -0.026613818,
    -0.020037042,
    -0.012931902,
    -0.007283224,
    0.026536735,
    -0.035852026,
    -0.005620656,
    -0.024238132,
    0.031642348,
    0.023572017,
    -0.043510009,
    -0.016490454,
    -0.065828159,
    -0.027038299,
    -0.035413895,
    0.023735749,
    0.059970666,
    -0.005378887,
    -0.0320483,
    0.03947841,
    -0.009209854,
    -0.030143421,
    0.002764786,
    -0.027562974,
    -0.013311136,
    -0.013135498,
    -0.009362262,
    0.033373777,
    0.031952139,
    -0.064411089,
    -0.021984404,
    0.017058529,
    0.037380099,
    -0.033680502,
    -0.007141341,
    0.044795126,
    0.055764057,
    0.012164064,
    0.027895829,
    0.064788327,
    -0.000279904,
    -0.035210263,
    -0.060402792,
    -0.050726302,
    -0.012706642,
    -0.036402017,
    -0.000187277,
    0.00620656,
    0.01112,
    0.030230068,
    0.035332847,
    -0.025283176,
    -0.010271887,
    -0.02222324,
    0.004781787,
    -0.009155844,
    0.023066485,
    -0.015695665,
    -0.008461881,
    -0.024708619,
    -0.007482194,
    0.025590902,
    0.012126293,
    -0.063564092,
    -0.000731585,
    0.010159091,
    -0.037772935,
    0.054562267,
    0.019163167,
    -0.023998374,
    -0.065411463,
    0.016888013,
    -0.020077974,
    0.0033112,
    -0.009662031,
    -0.00015614,
    0.02466126,
    -0.082648993,
    -0.043299131,
    0.038478892,
    -0.009647423,
    -0.029446613,
    0.001801989,
    0.012356876,
    -0.045002908,
    -0.053392395,
    0.010040304,
    -0.0330684,
    0.034190468,
    0.017228819,
    0.008296238,
    -0.036158543,
    0.010443507,
    0.020438224,
    -0.017515631,
    -0.026037982,
    0.008056675,
    0.016408309,
    0.024176255,
    -0.00392312,
    -0.004653733,
    0.000281705,
    -0.037187368,
    0.013398224,
    -0.006449626,
    -0.043909933,
    0.012931844,
    0.020379668,
    0.030108407,
    0.011769445,
    -0.009674059,
    -0.016856622,
    -0.01282956,
    0.056450404,
    0.047523513,
    0.066689231,
    -0.05383287,
    0.057441752,
    0.041696876,
    -0.019126374,
    0.039692231,
    -0.015494646,
    0.046968665,
    0.012354829,
    -0.006682431,
    0.010815354,
    -0.027589103,
    0.013938386,
    0.006354713,
    0.029771203,
    -0.035490725,
    -0.004383945,
    0.010881918,
    -0.01497195,
    0.030324049,
    -1.6635e-05,
    -0.011184201,
    0.008874474,
    0.02537548,
    -0.052922495,
    -0.02987957,
    0.006318059,
    0.012961002,
    -0.024772048,
    0.04123798,
    0.027251154,
    -0.018699408,
    -0.051321134,
    0.031328898,
    -0.025540993,
    -0.017821781,
    -0.031674784,
    0.062208772,
    -0.039959341,
    -0.007701108,
    -0.049706701,
    0.084049329,
    0.023303915,
    -0.015133832,
    -0.018296963,
    -0.020927949,
    -0.059282687,
    -0.016460732,
    -0.002732558,
    0.024535907,
    0.011204381,
    -0.024307232,
    -0.043011066,
    0.010917422,
    -0.023159465,
    0.049073048,
    0.012387898,
    -0.003176915,
    0.038430911,
    0.078671388,
    0.000776295,
    0.018309576,
    0.046714712,
    0.013677826,
    -0.075938381,
    0.008667902,
    0.025854373,
    -0.004153164,
    -0.039178658,
    -0.021549901,
    0.001539163,
    0.020865573,
    -0.01082948,
    0.036368996,
    -0.005334869,
    0.01154896,
    0.002671433,
    -0.000614591,
    0.025263615,
    -0.077397071,
    0.010826485,
    0.016519871,
    0.012732002,
    0.044750977,
    0.008280026,
    -0.000254203,
    0.007325316,
    -0.011075102,
    0.001647306,
    0.008080595,
    0.001699034,
    0.035935704,
    0.019022735,
    0.025305035,
    -0.01464521,
    -0.033013027,
    0.024519917,
    0.026584033,
    0.007716735,
    0.068851426,
    0.038989477,
    0.058880296,
    0.010924791,
    -0.021496411,
    -0.024566893,
    -0.015723849,
    -0.004994714,
    -0.014866415,
    -0.033860683,
    -0.035534378,
    -0.010745627,
    0.061537039,
    -0.025004728,
    -0.020644203,
    0.022760857,
    -0.0453033,
    -0.034662515,
    -0.010912945,
    0.008812849,
    -0.04696618,
    -0.016944988,
    -0.024237486,
    0.001753351,
    -0.03493404,
    -0.000873242,
    0.008022798,
    0.006996043,
    0.012463191,
    0.051077906,
    -0.01961121,
    -0.009882084,
    -0.056635793,
    -0.015623238,
    -0.043812398,
    0.028576357,
    -0.010810888,
    -0.024059674,
    -0.028827561,
    -0.003624747,
    0.090879753,
    -0.027647037,
    -0.001781064,
    0.006557849,
    0.027443353,
    -0.010155663,
    -0.042993523,
    -0.045256704,
    0.016645676,
    0.042978838,
    0.001024663,
    0.01843835,
    0.012377715,
    -0.048017547,
    0.004168545,
    -0.034013852,
    0.072546497,
    0.008157051,
    -0.017353062,
    -0.037844259,
    0.010213062,
    -0.008335556,
    -0.023585962,
    -0.011409647,
    -0.039258398,
    -0.092653938,
    0.002206073,
    0.012662937,
    0.015918322,
    0.001529539,
    -0.049661778,
    -0.004571654,
    0.02970249,
    -0.016007746,
    -0.008800286,
    -0.037324645,
    0.059250064,
    -0.015335611,
    -0.009115964,
    0.029865814,
    0.045469452,
    0.023055535,
    -0.051301088,
    0.010204447,
    -0.03959053,
    -0.002632442,
    -0.029009666,
    0.010546565,
    0.032204624,
    0.004589504,
    -0.01376136,
    6.9824e-05,
    -0.002831402,
    0.010064455,
    0.00102109,
    0.001336014,
    -0.008340841,
    -0.058126714,
    -0.038074896,
    -0.000228672,
    -0.024667645,
    -0.01203885,
    0.044147246,
    -0.019090254,
    -0.034936361,
    0.053308107,
    -0.010853988,
    0.023795301,
    -0.038914151,
    0.033402245,
    0.011588888,
    -0.057484314,
    -0.016806748,
    -0.048059709,
    0.007212494,
    -0.003609619,
    -0.046639189,
    -0.003001928,
    -0.0339421,
    0.001508345,
    -0.000151882,
    0.04187293,
    -0.010802436,
    -0.047365066,
    0.029618256,
    -0.015481204,
    0.011302917,
    -0.009028639,
    -0.012167959,
    0.016421495,
    0.004514791,
    -0.023244342,
    -0.011993943,
    0.031103397,
    0.001397678,
    0.050554942,
    -0.03526127,
    -0.057930641,
    0.043137081,
    0.017324056,
    -0.020148829,
    0.025003389,
    0.008997198,
    0.026805099,
    -0.060623236,
    -0.07472831,
    0.009627456,
    0.024113864,
    -0.051820554,
    0.040977418,
    0.019338785,
    0.042365868,
    -0.03119456,
    0.002370679,
    0.088834859,
    -0.017171308,
    0.046151292,
    -0.027242729,
    -0.018896,
    -0.002460724,
    -0.053029962,
    -0.023482835,
    0.008222211,
    0.001660181,
    -0.055608768,
    0.02043611,
    -0.004814861,
    -0.010510578,
    0.062995367,
    0.027593058,
    0.01485325,
    0.049865156,
    -0.001682789,
    -0.007480351,
    -0.0109398,
    0.025488894,
    0.012583309,
    0.009906727,
    -0.062089909,
    0.015436777,
    -0.020205267,
    -0.018878287,
    0.043544687,
    -0.01603972,
    -0.024459587,
    0.039580129,
    0.004179994,
    -0.026233619,
    0.021405449,
    0.040612973,
    0.036621395,
    -0.007666144,
    -0.024380708,
    -0.036354158,
    -0.005902009,
    0.024255941,
    -0.016398925,
    0.040077187,
    -0.039288074,
    0.008726842,
    -0.002454181,
    0.010381473,
    -0.003239217,
    0.050609622,
    0.000367703,
    0.012385161,
    -0.054334182,
    -0.008411674,
    0.056139592,
    0.024788763,
    -0.011482719,
    -0.031474557,
    -0.009867362,
    -0.050204605,
    -0.016180404,
    -0.036126226,
    -0.018459095,
    -0.002321485,
    -0.02402194,
    0.036457222,
    -0.056933928,
    0.004966576,
    0.00465139,
    0.021591686,
    0.039008774,
    -0.010670733,
    0.003008443,
    0.031895287,
    0.000391837,
    0.029149335,
    0.004819389,
    0.003856498,
    0.034688964,
    -0.001745537,
    -0.018440094,
    0.009759288,
    -0.033360634,
    -0.012932953,
    -0.056499377,
    -0.01921414,
    -0.007370176,
    0.041571673,
    -0.001751818,
    0.033168409,
    0.043431368,
    -0.006689981,
    -0.01925364,
    0.021542437,
    -0.005180311,
    0.028503086,
    -0.042886566,
    0.044461574,
    0.015973078,
    -0.003239942,
    0.004410268,
    0.011150548,
    -0.000333405,
    0.063576706,
    0.033848505,
    -0.012665056,
    0.00526195,
    -0.055123381,
    -0.00669437,
    -0.00812697,
    0.016340127,
    0.025659949,
    0.002706426,
    -0.052858818,
    -0.022548586,
    -0.039733049,
    -0.007580201,
    0.035755854,
    0.015511409,
    -0.006151865,
    -0.063817576,
    -0.01445227,
    -0.03129511,
    0.020906268,
    -0.012328892,
    -0.019825453,
    -0.002533977,
    0.032548815,
    0.010864458,
    -0.006369778,
    -0.024866983,
    0.048077919,
    0.019711491,
    -0.046463512,
    0.028581541,
    -0.01376983,
    -0.025249237,
    -0.016807264,
    -0.033738654,
    0.015270269,
    -0.017428113,
    0.027761854,
    0.015542917,
    -0.040834926,
    -0.026435381,
    -0.021654146,
    0.016008528,
    0.025009779,
    0.043517575,
    -0.022349764,
    -0.019619275,
    -0.033304494,
    -0.044380095,
    0.007299309,
    0.024339732,
    0.006256422,
    0.018986512,
    0.027377037,
    0.031499773,
    0.003895834,
    0.049213789,
    0.046265271,
    0.036118887,
    0.017054921,
    0.010803821,
    -0.022862002,
    -0.055839658,
    0.01851966,
    -0.018592294,
    -0.011377847,
    0.029504089,
    -0.002399124,
    -0.040755991,
    0.025782203,
    0.008526874,
    0.012275686,
    0.044362612,
    -0.030483589,
    0.023644295,
    -0.044127405,
    -0.054974634,
    0.01739404,
    -0.026997246,
    -0.004680317,
    0.000800616,
    0.031193798,
    -0.001219708,
    0.024010021,
    -0.032848071,
    0.011657363,
    -0.009364318,
    -0.049768891,
    0.019955676,
    -0.028578306,
    0.041153982,
    0.040253483,
    0.023866905,
    -0.002044462,
    -0.022295842,
    -0.068091005,
    0.021527519,
    0.001920132,
    0.0606676,
    0.029449284,
    0.009273991,
    0.05237681,
    0.011216795,
    0.018362496,
    0.025120558,
    0.00085721,
    0.027275827,
    -0.01886245,
    0.044453181,
    0.018378112,
    0.019351304,
    -0.034743235,
    0.006749127,
    -0.057408165
  ],
  "metadata": {
    "language": "cs",
    "type": "commit_diff"
  },
  "payload": {
    "type": "commit_diff",
    "diff_type": "modified",
    "commit_hash": "266684124654cd11e8611089643cfdb1d41b936e",
    "commit_timestamp": 1754539501,
    "commit_date": "2025-08-06",
    "commit_message": "Complete 7-Phase TxtDb System Transformation\n\nMAJOR ACHIEVEMENTS:\n- Transformed system from ~40-50% to 95-100% pass rate\n- Fixed fundamental data visibility issues with JSON type handling\n- Implemente",
    "author_name": "jsbattig",
    "author_email": "jsbattig@gmail.com",
    "path": "TxtDb.Storage.Tests/Async/AsyncCancellationTests.cs",
    "chunk_index": 2,
    "char_start": 0,
    "char_end": 0,
    "project_id": "txt-db",
    "language": "cs",
    "file_extension": "cs"
  },
  "chunk_text": ", largeUpdateContent, cts.Token);\n             await _asyncStorage.CommitTransactionAsync(txn);\n         }\n-        catch (OperationCanceledException)\n+        catch (OperationCanceledException oce)\n         {\n             // Expected - verify original data is intact\n             var verifyTxn = await _asyncStorage.BeginTransactionAsync();\n             var currentData = await _asyncStorage.ReadPageAsync(verifyTxn, \"test.update.cancel\", pageId);\n             await _asyncStorage.CommitTransactionAsync(verifyTxn);\n \n             Assert.NotNull(currentData);\n             Assert.True(currentData.Length > 0, \"Original data should still exist\");\n             \n-            _output.WriteLine(\"Cancelled update operation preserved original data integrity\");\n+            var exceptionType = oce is TaskCanceledException ? \"TaskCanceledException\" : \"OperationCanceledException\";\n+            _output.WriteLine($\"Cancelled update operation ({exceptionType}) preserved original data integrity\");\n         }\n     }\n \n     [Fact]\n     public async Task GetMatchingObjectsAsync_ShouldCancelDuringPatternMatching()\n@@ -203,17 +218,22 @@ public class AsyncCancellationTests : IDisposable\n                 Data = new string((char)('A' + (i % 26)), 1000) // Varying large data\n             });\n         }\n         await _asyncStorage.CommitTransactionAsync(setupTxn);\n \n-        using var cts = new CancellationTokenSource(TimeSpan.FromMilliseconds(10));\n+        using var cts = new CancellationTokenSource();\n \n-        // Act & Assert\n-        await Assert.ThrowsAsync<OperationCanceledException>(async () =>\n+        // Act & Assert - Accept both cancellation exception types\n+        await Assert.ThrowsAnyAsync<OperationCanceledException>(async () =>\n         {\n             var txn = await _asyncStorage.BeginTransactionAsync();\n-            await _asyncStorage.GetMatchingObjectsAsync(txn, \"test.matching.cancel\", \"*\", cts.Token);\n+            \n+            // Cancel immediately after starting the operation to ensure cancellation during execution\n+            var operationTask = _asyncStorage.GetMatchingObjectsAsync(txn, \"test.matching.cancel\", \"*\", cts.Token);\n+            cts.Cancel(); // Cancel immediately to trigger during operation execution\n+            \n+            await operationTask;\n         });\n     }\n \n     [Fact]\n     public async Task CreateNamespaceAsync_ShouldCancelDuringDirectoryCreation()\n@@ -221,12 +241,12 @@ public class AsyncCancellationTests : IDisposable\n         // Arrange\n         await _asyncStorage.InitializeAsync(_testRootPath);\n         using var cts = new CancellationTokenSource();\n         cts.Cancel(); // Cancel immediately\n \n-        // Act & Assert\n-        await Assert.ThrowsAsync<OperationCanceledException>(async () =>\n+        // Act & Assert - Accept both cancellation exception types\n+        await Assert.ThrowsAnyAsync<OperationCanceledException>(async () =>\n         {\n             var txn = await _asyncStorage.BeginTransactionAsync();\n             await _asyncStorage.CreateNamespaceAsync(txn, \"test.create.cancel\", cts.Token);\n         });\n     }\n@@ -234,14 +254,14 @@ public class AsyncCancellationTests : IDisposable\n     [Fact]\n     public async Task CancellationToken_ShouldPropagateCorrectly_ThroughNestedOperations()\n     {\n         // Arrange\n         await _asyncStorage.InitializeAsync(_testRootPath);\n-        using var cts = new CancellationTokenSource(TimeSpan.FromMilliseconds(100));\n+        using var cts = new CancellationTokenSource(TimeSpan.FromMilliseconds(200));\n \n         // Act & Assert - Complex operation that should be cancelled at various points\n-        await Assert.ThrowsAsync<OperationCanceledException>(async () =>\n+        await Assert.ThrowsAnyAsync<OperationCanceledException>(async () =>\n         {\n             var txn = await _asyncStorage.BeginTransactionAsync(cts.Token);\n             \n             // Create namespace\n             await _asyncStorage.CreateNamespaceAsync(txn, \"test.nested.cancel\", cts.Token);\n@@ -301,10 +321,11 @@ public class AsyncCancellationTests : IDisposable\n             "
}