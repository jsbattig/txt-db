{
  "id": "txt-db:diff:266684124654cd11e8611089643cfdb1d41b936e:TxtDb.Storage.Tests/Async/AsyncCancellationTests.cs:1",
  "vector": [
    -0.023063768,
    0.005601886,
    -0.010937998,
    0.04772472,
    -0.018117888,
    -0.000303407,
    -0.032073084,
    -0.009291486,
    0.039021485,
    0.003173793,
    0.019242998,
    -0.002104661,
    0.069486894,
    0.003651933,
    -0.079065241,
    -0.026278088,
    0.045872893,
    -0.005594577,
    -0.041845471,
    -0.003762214,
    -0.02781783,
    -0.037106246,
    -0.044053022,
    0.095524639,
    -0.031227998,
    -0.015598807,
    0.027247488,
    0.03405989,
    0.001615252,
    0.061244473,
    0.010727815,
    -0.072190017,
    0.01003133,
    0.03310696,
    0.025370069,
    -0.017099278,
    -0.025500545,
    -0.002550081,
    -0.034594525,
    0.038795602,
    0.024703287,
    -0.007209338,
    0.04803104,
    -0.025504792,
    0.025252994,
    -0.045813903,
    0.005181706,
    0.0061533,
    0.020874683,
    0.016598182,
    0.001531265,
    0.024891352,
    -0.023300419,
    0.062423479,
    0.007347411,
    -0.04428697,
    0.068524726,
    0.025217602,
    -0.051539276,
    0.063759744,
    -0.018328441,
    -0.018484257,
    0.013883696,
    0.008550474,
    -0.022044986,
    -0.03602165,
    -0.027763473,
    0.060285013,
    0.012368808,
    -0.06550651,
    0.000763175,
    0.029913438,
    -0.006693757,
    0.053984966,
    0.045749892,
    0.032569341,
    0.064687602,
    0.025639344,
    0.016521044,
    0.008937682,
    -0.032427218,
    -0.044338964,
    -3.9407e-05,
    -0.044368595,
    0.027259557,
    -0.035246983,
    0.032379527,
    -0.061143424,
    -0.002373499,
    -0.000764065,
    -0.003142636,
    0.022262592,
    0.01543544,
    0.038112439,
    0.009489249,
    0.030151879,
    0.002358279,
    0.002781011,
    0.03561379,
    -0.039603882,
    -0.044246856,
    0.001207637,
    -0.036287036,
    0.049628176,
    -0.067848131,
    -0.002986391,
    -0.010838906,
    -0.050760016,
    0.001309201,
    0.009491384,
    0.008384637,
    0.019481935,
    0.013359741,
    0.043806624,
    0.042695109,
    -0.033087119,
    -0.004960211,
    -0.021911157,
    0.0353976,
    0.072253391,
    0.000519056,
    -0.007431133,
    -0.029021634,
    0.048276287,
    -0.056878008,
    0.027634013,
    0.001701269,
    0.031311203,
    -0.014821079,
    -0.033214416,
    0.01388562,
    -0.00684434,
    0.007902651,
    0.001370888,
    0.00744949,
    0.055516496,
    0.024375919,
    0.042955995,
    -0.013961024,
    -0.014456877,
    0.038298242,
    0.000191635,
    0.005822278,
    0.022722004,
    -0.037448611,
    0.001318012,
    0.050443564,
    -0.009333975,
    0.011381328,
    -0.074214697,
    -0.010455633,
    0.042937245,
    -0.045331661,
    0.03199729,
    0.004286335,
    0.03713154,
    -0.020526554,
    -0.044538487,
    0.01231007,
    -0.031336676,
    -0.037305973,
    0.036161393,
    0.027826224,
    -0.018067978,
    -0.052611865,
    0.061251186,
    -0.020422945,
    0.00215214,
    0.000786328,
    -0.058486275,
    -0.047828581,
    0.043727338,
    -0.032898154,
    -0.012969142,
    -0.024546513,
    0.008050583,
    0.029167444,
    0.019461978,
    -0.080041192,
    -0.038411468,
    0.007025556,
    0.001103832,
    -0.005721813,
    0.005681274,
    -0.013822045,
    -0.018711612,
    0.03464213,
    0.016728688,
    0.00954281,
    0.009053357,
    -0.02477761,
    0.013530851,
    -0.05318477,
    -0.025008172,
    0.002116436,
    -0.014730207,
    -0.002285851,
    -0.006193712,
    0.032426704,
    0.031634841,
    -0.003323813,
    0.026707571,
    -0.078926988,
    -0.010258528,
    0.013234609,
    -0.006167342,
    -0.033063371,
    -0.027667172,
    0.008142614,
    -0.015335296,
    0.012204189,
    -0.030553371,
    -0.00874932,
    -0.039164878,
    -0.008454076,
    0.014287252,
    -0.047809929,
    0.014623008,
    0.048798375,
    -0.00242018,
    -0.008920163,
    -0.004967018,
    0.042112276,
    0.042865466,
    0.008355367,
    -0.04108334,
    -0.062158443,
    -0.056400366,
    -0.035692342,
    -0.037184659,
    -0.011363667,
    -0.05408144,
    0.025963761,
    -0.039184712,
    -0.061499104,
    0.050372332,
    0.010866672,
    -0.030182177,
    -0.01048532,
    0.001869819,
    -0.001677349,
    0.031442508,
    0.013663857,
    -0.025147958,
    -0.055767871,
    -0.00489579,
    0.078089319,
    -0.010582626,
    0.025163807,
    -0.016639013,
    -0.0719091,
    0.034153126,
    -0.030804237,
    0.050884042,
    0.051013023,
    0.028215794,
    -0.02165959,
    -0.010376694,
    0.022307731,
    -0.011769012,
    0.005307192,
    0.008224368,
    -0.033108927,
    0.015184022,
    -0.019245721,
    0.013055266,
    -0.006265255,
    -0.013346757,
    -0.03667203,
    0.069296591,
    0.013098075,
    0.014278886,
    0.04188044,
    0.014368549,
    0.001652959,
    -0.021159552,
    0.004120816,
    0.042749986,
    0.008389355,
    0.011256546,
    -0.057578359,
    0.001092008,
    0.004682751,
    -0.016090021,
    -0.00926431,
    -0.019017486,
    0.058547504,
    0.002468031,
    0.042518243,
    0.024270039,
    0.018664803,
    -0.020024961,
    -0.019215073,
    -0.02706035,
    0.057312503,
    0.019132609,
    0.028689753,
    -0.014347651,
    0.010068656,
    -0.034420937,
    -0.007048178,
    0.007448394,
    0.047823228,
    0.005968505,
    0.025287353,
    0.005746623,
    0.026770635,
    -0.039647162,
    0.014662581,
    -0.017170511,
    -0.060627528,
    0.013845387,
    0.016930595,
    -0.006674304,
    0.0164652,
    -0.054144837,
    -0.020132488,
    0.001962639,
    -0.042132396,
    0.008270815,
    0.008062849,
    -0.00774212,
    0.033091471,
    -0.067638643,
    0.002745288,
    0.00506417,
    -0.077479206,
    -0.019470338,
    0.030866489,
    -0.027858304,
    -0.041674238,
    0.044659246,
    0.004639104,
    0.051167563,
    -0.004517083,
    0.010298241,
    -0.004422255,
    0.018481599,
    -0.004155498,
    0.004022974,
    -0.001208203,
    -0.014987698,
    -0.008646842,
    -0.033802073,
    0.094301969,
    -0.028325789,
    -0.007721842,
    -0.040772106,
    -0.021446273,
    0.027352691,
    -0.016244052,
    -0.048379388,
    0.012871996,
    -0.024702189,
    -0.054820169,
    0.036848105,
    -0.026844542,
    -0.001661371,
    -0.006117112,
    0.033195268,
    0.014512531,
    0.032356884,
    -0.039447695,
    -0.021702358,
    -0.011344611,
    -0.017546892,
    -0.013228154,
    0.040163089,
    -0.010735164,
    0.007308291,
    -0.053324774,
    -0.05428331,
    -0.047081344,
    0.013813075,
    -0.031328544,
    0.016900679,
    0.025889836,
    -0.004916724,
    0.01246706,
    -0.007139858,
    0.005702148,
    0.009271641,
    0.015106999,
    0.00522989,
    0.008686871,
    -0.008799301,
    0.018483471,
    0.02712499,
    -0.007076531,
    0.086440183,
    -0.010720825,
    0.028366143,
    -0.018314928,
    0.005008622,
    -0.013123808,
    -0.02359334,
    0.015367387,
    0.022839112,
    0.029022485,
    -0.033316679,
    0.030790655,
    -0.003286799,
    0.032695062,
    -0.057851244,
    0.039014462,
    -0.001919997,
    0.008449958,
    0.037166327,
    0.016275011,
    0.009264787,
    -0.00345839,
    0.043150991,
    -0.000880184,
    0.011456294,
    -0.03651163,
    0.065816931,
    -0.017302461,
    0.005359492,
    0.013312218,
    -0.01715502,
    0.000255963,
    -0.036597386,
    -0.005296073,
    0.012246654,
    -0.032691058,
    0.011907853,
    -0.00310886,
    -0.091137908,
    -0.043847274,
    -0.007586279,
    0.009261862,
    0.002555175,
    -0.05944778,
    0.018571708,
    0.040695496,
    -0.028763488,
    0.031577259,
    -0.011162426,
    -0.027755992,
    -0.024829254,
    -0.01793058,
    -0.017234532,
    0.038603235,
    -0.035755198,
    -0.004746862,
    -0.027702242,
    0.029441739,
    0.036535583,
    -0.051470891,
    -0.026385766,
    -0.062198292,
    -0.031040605,
    -0.038465232,
    0.017606895,
    0.047538828,
    -0.006804591,
    -0.027162816,
    0.028567983,
    0.001603523,
    -0.045096681,
    -0.002396486,
    -0.010446772,
    -0.003641834,
    -0.010138743,
    -0.01312187,
    0.035819117,
    0.035214283,
    -0.055752471,
    -0.026048552,
    0.015332976,
    0.031508535,
    -0.034106445,
    -0.012962412,
    0.043294664,
    0.039730866,
    0.015207141,
    0.00714352,
    0.055919301,
    0.000250012,
    -0.039357297,
    -0.052529994,
    -0.043744061,
    -0.015856137,
    -0.042498544,
    -0.000257359,
    0.0031528,
    0.011315192,
    0.035555571,
    0.039860826,
    -0.01692765,
    -0.011426447,
    -0.029181369,
    -0.001961971,
    -0.012729133,
    0.036363151,
    0.004053473,
    0.006194257,
    -0.022721967,
    -0.015163065,
    0.02817145,
    0.017482392,
    -0.068412013,
    -0.003717454,
    -0.00013409,
    -0.032820709,
    0.061002355,
    0.009367123,
    -0.009990431,
    -0.08186882,
    0.020332847,
    -0.031827237,
    -0.000818877,
    -0.006115993,
    0.014257072,
    0.019472791,
    -0.095259756,
    -0.042977922,
    0.055196196,
    -0.013540029,
    -0.038232073,
    0.001219211,
    0.007948134,
    -0.036971278,
    -0.061444294,
    0.012137418,
    -0.029699922,
    0.033321992,
    0.003861063,
    0.004093419,
    -0.035702035,
    -0.005126834,
    0.018387886,
    -0.010714182,
    -0.034716625,
    0.004020772,
    0.008151915,
    0.01466218,
    0.008746831,
    -0.005534736,
    -0.005890336,
    -0.031169882,
    0.008605767,
    -0.010024602,
    -0.038589913,
    0.025149837,
    0.039426956,
    0.02508474,
    0.022551697,
    -0.012655246,
    -0.001901554,
    -0.018513342,
    0.047184594,
    0.06463635,
    0.066126026,
    -0.026268223,
    0.048164658,
    0.033175789,
    -0.002332301,
    0.046316274,
    -0.022238996,
    0.046751115,
    0.016232837,
    -0.008843854,
    0.016819635,
    -0.041038577,
    0.019951161,
    0.001377393,
    0.034058422,
    -0.04576366,
    -0.009086021,
    -0.004160054,
    -0.013568213,
    0.02646848,
    0.020168493,
    -0.006351911,
    0.009054627,
    0.021434359,
    -0.055682756,
    -0.02757314,
    0.002693502,
    3.7003e-05,
    -0.041334134,
    0.037376005,
    0.022569945,
    -0.030192064,
    -0.050220072,
    0.010854313,
    -0.023978386,
    -0.02955539,
    -0.017962469,
    0.062673189,
    -0.028593676,
    -0.003459989,
    -0.035581812,
    0.079808407,
    0.009482475,
    -0.002886893,
    -0.021020552,
    -0.022387734,
    -0.054690458,
    -0.018001281,
    0.01069406,
    0.018982718,
    0.017730307,
    -0.021550873,
    -0.033589404,
    0.01991698,
    -0.020624476,
    0.063530929,
    0.027333943,
    0.005025456,
    0.037109375,
    0.062923864,
    -0.010587204,
    0.023168705,
    0.039604701,
    0.01117491,
    -0.086811796,
    0.007028101,
    0.026793726,
    0.010446809,
    -0.033060685,
    -0.024908418,
    -0.013109442,
    0.032168437,
    -0.010004617,
    0.02894073,
    0.000150011,
    0.013507855,
    0.005107644,
    -0.007334935,
    0.021488832,
    -0.08345671,
    0.013217229,
    0.009234945,
    0.025468158,
    0.047799148,
    0.005339931,
    -0.013212905,
    0.015708745,
    -0.01210107,
    -0.007898889,
    0.009819142,
    0.00654834,
    0.042662106,
    0.013358086,
    0.020293469,
    -0.029329825,
    -0.033141792,
    0.015514207,
    0.020953033,
    0.011559616,
    0.083435088,
    0.023543335,
    0.05191616,
    0.006634349,
    -0.019028367,
    -0.026831223,
    -0.024564557,
    -0.016410269,
    -0.000677183,
    -0.024222896,
    -0.021764901,
    -0.009730001,
    0.053798657,
    -0.025650512,
    -0.021196874,
    0.024644235,
    -0.033483211,
    -0.033799939,
    -0.013577209,
    0.003628231,
    -0.030099891,
    -0.020886716,
    -0.021940149,
    0.003699773,
    -0.045922726,
    0.006628404,
    0.005273701,
    0.002435942,
    0.006057706,
    0.051986869,
    -0.014677833,
    -0.010720628,
    -0.051637579,
    -0.027181836,
    -0.043856449,
    0.041012675,
    -0.016587824,
    -0.004221948,
    -0.004680313,
    -0.004148503,
    0.079526752,
    -0.026051862,
    0.003115953,
    0.009404531,
    0.016083058,
    -0.019716602,
    -0.034860503,
    -0.035534222,
    0.013133595,
    0.049260907,
    -0.00166745,
    0.023170823,
    0.012038605,
    -0.045287803,
    -0.017511634,
    -0.036951181,
    0.079636753,
    -0.002853371,
    -0.013853885,
    -0.02880308,
    0.013188371,
    -0.014730202,
    -0.023007765,
    -0.017874815,
    -0.04107349,
    -0.09240821,
    0.006312231,
    0.024230706,
    0.023816086,
    -0.008800889,
    -0.052400783,
    0.006237673,
    0.031735905,
    -0.011235978,
    -0.003892313,
    -0.04403292,
    0.045779172,
    -0.020505093,
    -0.01616393,
    0.019181542,
    0.035456445,
    0.024576191,
    -0.066206373,
    0.014198423,
    -0.039540153,
    0.008235856,
    -0.030130569,
    0.004700626,
    0.035626631,
    0.001461186,
    -0.025209289,
    -0.005961077,
    0.003391088,
    -0.003316284,
    0.004934042,
    0.012191528,
    -0.008252999,
    -0.051580116,
    -0.043225482,
    -0.004827345,
    -0.013399347,
    -0.010592819,
    0.050289623,
    -0.032190233,
    -0.029052472,
    0.04900283,
    -0.000722429,
    0.023016904,
    -0.049002428,
    0.028642492,
    0.005449359,
    -0.049936794,
    -0.016961955,
    -0.048290942,
    -0.006813147,
    -0.00597967,
    -0.033626255,
    0.003499295,
    -0.027359074,
    0.000125831,
    0.001139572,
    0.037392121,
    -0.005300221,
    -0.043374054,
    0.034469616,
    -0.005787127,
    0.003275587,
    -0.009286058,
    -0.02008942,
    -0.003434829,
    0.01386558,
    -0.035326406,
    -0.017088657,
    0.033261895,
    -0.015032291,
    0.049241364,
    -0.039550036,
    -0.064206079,
    0.041862708,
    0.012874312,
    -0.017132482,
    0.027819475,
    0.009665254,
    0.019711452,
    -0.065566935,
    -0.074474625,
    0.005595207,
    0.006484061,
    -0.047901679,
    0.037446331,
    0.004799044,
    0.041539706,
    -0.022147112,
    -0.005022618,
    0.079659224,
    -0.029605843,
    0.04050675,
    -0.020401517,
    -0.022650894,
    -0.010326381,
    -0.045856539,
    -0.015414515,
    0.009672694,
    -0.005170507,
    -0.051991697,
    0.028805709,
    -0.013089493,
    -0.00768081,
    0.055410199,
    0.009275408,
    0.017311761,
    0.059393015,
    -0.009322142,
    -0.00838989,
    -0.009923067,
    0.019302145,
    0.023911508,
    -0.002585391,
    -0.045163911,
    0.016075896,
    -0.015538976,
    -0.017127072,
    0.059106916,
    -0.026952781,
    -0.025514038,
    0.030945497,
    0.019389581,
    -0.028182641,
    0.026716083,
    0.022254227,
    0.026949197,
    -0.000281806,
    -0.014642163,
    -0.049610004,
    0.004025972,
    0.013606346,
    -0.019737056,
    0.048023347,
    -0.034479573,
    0.006652523,
    -0.004137498,
    -0.004794079,
    -0.009322341,
    0.04941798,
    0.003115109,
    0.014598757,
    -0.047349717,
    -0.013588058,
    0.063254379,
    0.042555045,
    0.003506603,
    -0.02999974,
    -0.027220471,
    -0.055307176,
    -0.015416763,
    -0.030060362,
    -0.007186912,
    -0.019765902,
    -0.025004644,
    0.027543802,
    -0.043414496,
    -0.000101047,
    0.009844203,
    0.024508389,
    0.035433203,
    -0.007203096,
    -0.003397279,
    0.035692938,
    0.007100287,
    0.026427235,
    0.003564264,
    -0.006533591,
    0.025768932,
    -0.020416331,
    -0.02082268,
    -0.003120503,
    -0.046944607,
    -0.00838703,
    -0.044991776,
    -0.023916997,
    -0.008343704,
    0.034413327,
    -0.026788134,
    0.033599563,
    0.036628563,
    0.019774605,
    -0.005404358,
    0.019323796,
    -0.014981677,
    0.023829278,
    -0.058101907,
    0.042053796,
    0.013149314,
    -0.010459463,
    0.007657626,
    0.004785892,
    -0.000949034,
    0.06180374,
    0.034948301,
    -0.018729242,
    0.023019388,
    -0.051808745,
    -0.009815586,
    -0.01187317,
    0.030722983,
    0.031256102,
    0.008028922,
    -0.040592555,
    -0.024173837,
    -0.031982541,
    0.001443854,
    0.035436377,
    0.015936892,
    -0.015086537,
    -0.057073865,
    -0.002405824,
    -0.027810583,
    0.019555619,
    -0.005999587,
    -0.004592564,
    -0.022423793,
    0.031435147,
    0.008845577,
    -0.021880139,
    -0.023803195,
    0.054460775,
    0.02455231,
    -0.041101791,
    0.014236361,
    -0.018074729,
    -0.01618953,
    -0.02211339,
    -0.046893686,
    0.005420267,
    -0.017438471,
    0.016223621,
    0.013123838,
    -0.031955346,
    -0.016083384,
    -0.029292613,
    0.024274036,
    0.043656658,
    0.045674175,
    -0.020108081,
    -0.023651982,
    -0.028409528,
    -0.043268058,
    -0.005246471,
    0.019382667,
    -0.011964434,
    0.021961281,
    0.021775655,
    0.012607992,
    0.014770878,
    0.035182297,
    0.038113076,
    0.05141151,
    0.016954146,
    0.004498278,
    -0.026909096,
    -0.048644014,
    0.006143335,
    -0.019106217,
    -0.011858643,
    0.028939562,
    -0.009866942,
    -0.050188225,
    0.020376999,
    0.010333935,
    0.014877495,
    0.046599645,
    -0.037114996,
    0.026529854,
    -0.048228581,
    -0.05931554,
    0.010952981,
    -0.031214168,
    -0.010034343,
    -0.003600454,
    0.036949612,
    0.004139506,
    0.02628009,
    -0.020596221,
    0.010637359,
    -0.010504275,
    -0.054398436,
    0.017753894,
    -0.025847252,
    0.042635314,
    0.043699402,
    0.022422081,
    -0.004747741,
    -0.017609393,
    -0.061495759,
    0.022163469,
    -0.005504454,
    0.061361186,
    0.029895805,
    0.007016897,
    0.037295096,
    0.016460689,
    0.02489109,
    0.017974537,
    0.013516683,
    0.031214727,
    -0.027461791,
    0.037832551,
    0.015229402,
    0.030783689,
    -0.036853984,
    0.023765838,
    -0.061870947
  ],
  "metadata": {
    "language": "cs",
    "type": "commit_diff"
  },
  "payload": {
    "type": "commit_diff",
    "diff_type": "modified",
    "commit_hash": "266684124654cd11e8611089643cfdb1d41b936e",
    "commit_timestamp": 1754539501,
    "commit_date": "2025-08-06",
    "commit_message": "Complete 7-Phase TxtDb System Transformation\n\nMAJOR ACHIEVEMENTS:\n- Transformed system from ~40-50% to 95-100% pass rate\n- Fixed fundamental data visibility issues with JSON type handling\n- Implemente",
    "author_name": "jsbattig",
    "author_email": "jsbattig@gmail.com",
    "path": "TxtDb.Storage.Tests/Async/AsyncCancellationTests.cs",
    "chunk_index": 1,
    "char_start": 0,
    "char_end": 0,
    "project_id": "txt-db",
    "language": "cs",
    "file_extension": "cs"
  },
  "chunk_text": "xceptionType = oce is TaskCanceledException ? \"TaskCanceledException\" : \"OperationCanceledException\";\n+            _output.WriteLine($\"Cancelled commit ({exceptionType}) left system in consistent state with {objectCount} objects\");\n         }\n     }\n \n     [Fact]\n     public async Task InsertObjectAsync_ShouldCancelDuringLargeDataProcessing()\n@@ -99,14 +108,14 @@ public class AsyncCancellationTests : IDisposable\n         await _asyncStorage.InitializeAsync(_testRootPath);\n         var setupTxn = await _asyncStorage.BeginTransactionAsync();\n         await _asyncStorage.CreateNamespaceAsync(setupTxn, \"test.insert.cancel\");\n         await _asyncStorage.CommitTransactionAsync(setupTxn);\n \n-        using var cts = new CancellationTokenSource(TimeSpan.FromMilliseconds(50));\n+        using var cts = new CancellationTokenSource(TimeSpan.FromMilliseconds(100));\n \n-        // Act & Assert\n-        await Assert.ThrowsAsync<OperationCanceledException>(async () =>\n+        // Act & Assert - Accept both cancellation exception types\n+        await Assert.ThrowsAnyAsync<OperationCanceledException>(async () =>\n         {\n             var txn = await _asyncStorage.BeginTransactionAsync();\n             \n             // Try to insert very large object that should trigger cancellation\n             var largeData = new { \n@@ -133,17 +142,22 @@ public class AsyncCancellationTests : IDisposable\n         var pageId = await _asyncStorage.InsertObjectAsync(setupTxn, \"test.read.cancel\", new { \n             LargeContent = new string('Y', 500_000) // 500KB\n         });\n         await _asyncStorage.CommitTransactionAsync(setupTxn);\n \n-        using var cts = new CancellationTokenSource(TimeSpan.FromMilliseconds(5));\n+        using var cts = new CancellationTokenSource();\n \n-        // Act & Assert\n-        await Assert.ThrowsAsync<OperationCanceledException>(async () =>\n+        // Act & Assert - Accept both cancellation exception types\n+        await Assert.ThrowsAnyAsync<OperationCanceledException>(async () =>\n         {\n             var txn = await _asyncStorage.BeginTransactionAsync();\n-            await _asyncStorage.ReadPageAsync(txn, \"test.read.cancel\", pageId, cts.Token);\n+            \n+            // Cancel immediately after starting the operation to ensure cancellation during execution\n+            var operationTask = _asyncStorage.ReadPageAsync(txn, \"test.read.cancel\", pageId, cts.Token);\n+            cts.Cancel(); // Cancel immediately to trigger during operation execution\n+            \n+            await operationTask;\n         });\n     }\n \n     [Fact]\n     public async Task UpdatePageAsync_ShouldCancelCleanly_WithoutCorruptingData()\n@@ -155,11 +169,11 @@ public class AsyncCancellationTests : IDisposable\n         \n         var initialData = new { Status = \"Original\", Version = 1 };\n         var pageId = await _asyncStorage.InsertObjectAsync(setupTxn, \"test.update.cancel\", initialData);\n         await _asyncStorage.CommitTransactionAsync(setupTxn);\n \n-        using var cts = new CancellationTokenSource(TimeSpan.FromMilliseconds(5));\n+        using var cts = new CancellationTokenSource(TimeSpan.FromMilliseconds(100));\n \n         // Act - Try to update with cancellation\n         try\n         {\n             var txn = await _asyncStorage.BeginTransactionAsync();\n@@ -170,21 +184,22 @@ public class AsyncCancellationTests : IDisposable\n             }).ToArray();\n \n             await _asyncStorage.UpdatePageAsync(txn, \"test.update.cancel\", pageId, largeUpdateContent, cts.Token);\n             await _asyncStorage.CommitTransactionAsync(txn);\n         }\n-        catch (OperationCanceledException)\n+        catch (OperationCanceledException oce)\n         {\n             // Expected - verify original data is intact\n             var verifyTxn = await _asyncStorage.BeginTransactionAsync();\n             var currentData = await _asyncStorage.ReadPageAsync(verifyTxn, \"test.update.cancel\", pageId);\n             await _asyncStorage.CommitTransactionAsync(verifyTxn);\n \n             Assert.NotNull(currentData);\n             Assert.True(currentData.Length > 0, \"Ori"
}