{
  "id": "txt-db:diff:e9f60bf37b6d875c8108422c6f2bd0dc4167303f:TxtDb.Sql/Services/SqlExecutor.cs:5",
  "vector": [
    0.010055194,
    -0.017734965,
    0.02037498,
    0.074491598,
    -0.020572433,
    -0.007970729,
    -0.0207178,
    0.000519487,
    0.001925412,
    0.001239144,
    -0.013888777,
    -0.03723792,
    0.041224848,
    -0.023504438,
    -0.053960592,
    -0.025394963,
    0.037311271,
    0.020122979,
    -0.004870608,
    -0.029898772,
    -0.060432106,
    -0.058915839,
    -0.055193856,
    0.077027828,
    -0.005689496,
    0.011143916,
    0.02782841,
    0.03330208,
    0.012046487,
    0.035191093,
    -0.035370756,
    -0.019431762,
    0.014677221,
    -0.009001618,
    0.016813911,
    0.021128178,
    -0.029076686,
    -0.034593455,
    -0.033270232,
    -0.003571947,
    0.045483749,
    0.020434478,
    0.049298134,
    -0.020264387,
    -0.004306785,
    -0.053089287,
    0.058226854,
    -0.028082052,
    -0.003432881,
    0.005724418,
    -0.042885665,
    -0.020097796,
    -0.016139979,
    0.072517373,
    0.056580711,
    -0.001496418,
    0.101144567,
    0.03012917,
    -0.046300471,
    0.055824913,
    -0.03777083,
    -0.030985139,
    -0.003316116,
    -0.017725641,
    -0.027382283,
    -0.051051352,
    -0.029023239,
    0.064820036,
    0.011519932,
    -0.062244792,
    -0.000189442,
    0.002256673,
    0.011007004,
    0.062661573,
    0.020641839,
    0.018673569,
    -0.002972987,
    0.022395594,
    0.038299661,
    0.019344758,
    -0.041359741,
    -0.083383113,
    -0.042113528,
    -0.000726715,
    0.042155966,
    -0.055167582,
    0.044615723,
    -0.039945591,
    0.017639693,
    0.003572064,
    0.011463585,
    0.039955162,
    0.011180215,
    0.040689431,
    -0.01336452,
    -0.022216616,
    0.029813973,
    0.021459805,
    0.015310666,
    -0.02465667,
    -0.027163519,
    -0.014277155,
    -0.017103737,
    0.028691424,
    -0.032155771,
    0.028582161,
    -0.044430438,
    -0.041482698,
    -0.014646543,
    0.020159131,
    -0.002942007,
    -0.010312829,
    0.000213918,
    0.018324861,
    0.009734303,
    -0.005716076,
    -0.031170221,
    -0.047224268,
    0.019407874,
    -0.033857126,
    -0.010148524,
    0.079953164,
    -0.041100536,
    0.005149933,
    0.001976636,
    0.055468563,
    0.026800152,
    0.049660325,
    0.033212248,
    -0.040901914,
    -0.011073058,
    0.012876472,
    -0.049905427,
    -0.004347737,
    -0.016832991,
    0.040403601,
    0.021277508,
    0.018229695,
    -0.002949702,
    -0.052396554,
    0.046110641,
    0.000845662,
    0.020923816,
    -0.014894342,
    -0.019727696,
    0.020652603,
    0.049464587,
    0.01010072,
    -0.005073812,
    -0.047489051,
    0.005305861,
    0.077241898,
    -0.022243816,
    0.02959514,
    -0.004334432,
    0.054684214,
    -0.044671033,
    -0.060287077,
    -0.011119133,
    0.001007132,
    -0.040136032,
    0.025307359,
    0.013171396,
    0.016879356,
    -0.003467095,
    0.060730103,
    0.013513937,
    0.032675993,
    0.02470612,
    -0.005580759,
    -0.055757605,
    0.028406106,
    -0.04723483,
    -0.011400456,
    0.01031478,
    0.041239459,
    0.041967519,
    0.008222989,
    -0.068338506,
    -0.04650623,
    0.026024042,
    -0.00223178,
    -0.003386238,
    -0.026178814,
    0.009375332,
    -0.003882758,
    0.015611754,
    0.069368206,
    0.024816955,
    0.037247639,
    -0.024708169,
    -0.049237996,
    -0.027872823,
    -0.016466426,
    0.026086826,
    -0.031470008,
    -0.002580907,
    0.00499652,
    0.016474728,
    0.009444506,
    -0.017337162,
    0.049187914,
    -0.016676722,
    -0.01405107,
    0.033734921,
    0.020311682,
    -0.05943691,
    -0.004433505,
    -0.006990642,
    0.048440553,
    -0.005166139,
    -0.047641668,
    -0.011093367,
    0.020734239,
    0.011398446,
    -0.002231537,
    -0.014690067,
    -0.004831381,
    0.056095585,
    -0.012384295,
    0.020183731,
    -0.009654657,
    -0.005249496,
    0.016993776,
    -0.030556951,
    -0.040279482,
    -0.036244228,
    -0.053886034,
    -0.009333807,
    -0.016571842,
    0.019504678,
    -0.018909497,
    0.036952522,
    -0.046869051,
    -0.069886431,
    0.009548693,
    0.005169463,
    0.011418123,
    0.027390769,
    -0.024212047,
    -0.036405943,
    0.029174995,
    0.024894048,
    -0.027885899,
    -0.067886092,
    0.041452181,
    0.046701331,
    0.023073126,
    0.028930107,
    -0.005021191,
    -0.027273551,
    0.037270058,
    6.1187e-05,
    0.058529802,
    0.010008733,
    -0.008658476,
    0.036644898,
    0.003132711,
    0.043812085,
    0.031884775,
    0.023307135,
    0.028208796,
    -0.035105471,
    0.010131214,
    0.004570047,
    0.054392394,
    -0.010119827,
    0.022103598,
    0.004721059,
    0.015052946,
    0.052542407,
    -0.041022617,
    0.04879804,
    -0.031340223,
    0.044030122,
    -0.01800709,
    0.009300787,
    0.012532048,
    -0.002880563,
    -0.000126297,
    -0.069972925,
    0.006707361,
    -0.012628283,
    -0.020918122,
    -0.048079193,
    -0.02056523,
    0.01624413,
    -0.017812513,
    0.018239427,
    0.043224975,
    0.014578365,
    -0.027646391,
    0.020192964,
    -0.011317744,
    0.035439733,
    0.033137992,
    0.002698629,
    -0.009699016,
    0.012589204,
    -0.0271118,
    -0.035407506,
    0.007638277,
    0.065712221,
    0.045829248,
    -0.012283934,
    -0.012917253,
    0.041645981,
    -0.026581908,
    0.032337252,
    -0.007703287,
    -0.07409092,
    -0.00030665,
    0.02182761,
    0.029668717,
    0.037135851,
    -0.028046135,
    -0.043917585,
    -0.02250939,
    -0.042657226,
    -0.025859058,
    0.019432746,
    -0.015328056,
    0.035827026,
    -0.021193501,
    -0.039110392,
    -0.022715565,
    -0.03257288,
    -0.009741277,
    0.060523871,
    -0.059286185,
    -0.007367881,
    0.027880816,
    0.025608385,
    0.06169565,
    -0.013210154,
    0.007387394,
    -0.019411776,
    0.042448323,
    -0.025739787,
    -0.019259041,
    0.031360541,
    0.011944865,
    0.024945959,
    -0.03924685,
    0.011808916,
    -0.005287817,
    0.018803909,
    -0.006512469,
    -0.035580464,
    0.017938182,
    0.005221666,
    -0.060256265,
    -0.029640347,
    -0.020147711,
    -0.045450218,
    0.025476379,
    -0.036216475,
    0.017559042,
    -0.031312495,
    0.031977046,
    0.013412738,
    0.000220658,
    -0.024116479,
    -0.02718156,
    0.008466753,
    0.004792555,
    -0.031570964,
    0.052022777,
    -0.016275652,
    -0.012973587,
    -0.012614789,
    -0.05202971,
    -0.019012036,
    0.015268299,
    -0.016196525,
    0.02969797,
    0.023354156,
    -0.015080488,
    -0.034283459,
    -0.004583382,
    -0.002218696,
    -0.032634448,
    0.004156557,
    0.005195795,
    -0.022065347,
    -0.033176895,
    -0.019750478,
    0.008416537,
    -0.048281889,
    0.057390727,
    -0.008971195,
    0.052826807,
    0.003201133,
    0.006854149,
    -0.017493397,
    -0.034975421,
    -0.032732934,
    0.006763225,
    0.016814847,
    -0.010786176,
    -0.00430025,
    -0.022486867,
    0.04301108,
    -0.038349804,
    0.032170057,
    0.034810759,
    0.061687436,
    0.014477919,
    0.006497519,
    0.064172283,
    0.046527952,
    0.043748353,
    0.016381953,
    0.009251447,
    -0.003522976,
    0.020941826,
    -0.003869184,
    -0.03400116,
    0.012022592,
    -0.014892068,
    0.021436932,
    -0.04233731,
    -0.013985439,
    -0.015077799,
    -0.038735252,
    0.007086666,
    -0.005408327,
    -0.129627958,
    -0.011404792,
    -0.000264918,
    -0.017527863,
    0.012195325,
    -0.04861927,
    0.010992989,
    -0.004818442,
    -0.066359185,
    0.016978474,
    0.022819079,
    -0.021574806,
    -0.019004297,
    -0.026723288,
    -0.048288781,
    0.022005629,
    0.004465782,
    -0.035599079,
    -0.015673686,
    0.037264112,
    0.013498568,
    -0.055043437,
    -0.030916542,
    -0.059616324,
    0.026344815,
    -0.017135354,
    0.002454807,
    0.072446555,
    -0.009332553,
    0.017509835,
    0.044676162,
    -0.035463095,
    0.011344864,
    0.00556245,
    -0.017554237,
    0.020921314,
    -0.014319376,
    -0.042221118,
    0.046838652,
    0.029538061,
    -0.048763286,
    0.007769602,
    0.000260448,
    0.040403176,
    -0.036229558,
    -0.012667486,
    0.022559695,
    0.038400989,
    0.016658843,
    -0.029696602,
    0.054565724,
    -0.014586311,
    -0.02372377,
    -0.032576334,
    -0.034390949,
    -0.064237602,
    -0.056342147,
    -0.012293813,
    0.003695318,
    -0.008181607,
    0.003197751,
    0.053091042,
    -0.008397589,
    -0.034988612,
    0.022754889,
    0.021546707,
    0.023967799,
    -0.014351966,
    0.056420594,
    -0.038531788,
    0.037627995,
    -0.027932214,
    0.017880715,
    0.032376658,
    -0.073303387,
    0.017559191,
    -0.001823397,
    -0.0496413,
    0.058185849,
    0.003007939,
    -0.003381713,
    -0.083547331,
    0.028577657,
    -0.021745609,
    -0.009863662,
    -0.022466697,
    0.000931867,
    0.016388828,
    -0.064104728,
    -0.012875943,
    -0.00713452,
    -0.003353591,
    0.006978232,
    0.036196616,
    0.016005516,
    -0.008240854,
    -0.036558945,
    0.019431008,
    0.037466373,
    0.030076487,
    0.00593812,
    -0.021135313,
    -0.004126175,
    0.006266309,
    0.000954448,
    -0.013899119,
    -0.036189321,
    0.016991099,
    0.002960965,
    0.024309186,
    0.002410772,
    -0.012120297,
    -0.039414443,
    -0.002702777,
    0.012292561,
    -0.010297362,
    -0.060013548,
    0.001617492,
    0.014583949,
    -0.015765112,
    0.04386577,
    0.022085702,
    -0.022306731,
    -0.019020006,
    0.026755532,
    0.036055505,
    0.045660544,
    -0.063941792,
    0.031472858,
    0.003210985,
    0.005960666,
    0.034426082,
    0.001723983,
    0.005837133,
    0.034424983,
    0.002005352,
    -0.008274771,
    -0.004349636,
    0.009629976,
    -0.004607156,
    0.00154306,
    -0.038266201,
    -0.020865995,
    0.012504601,
    -0.038877849,
    -0.003423635,
    0.027611431,
    0.013824945,
    0.050634719,
    0.038646694,
    -0.052874379,
    -0.033953272,
    0.031775825,
    0.015251453,
    -7.6167e-05,
    0.016188374,
    0.023831675,
    -0.005318107,
    -0.048397627,
    0.022696208,
    0.002173772,
    -0.021346496,
    0.01060328,
    0.017727122,
    -0.020589177,
    0.021563565,
    -0.039080571,
    0.084118836,
    0.026060572,
    -0.043105144,
    0.005421693,
    -0.023280511,
    -0.032923795,
    -0.012849766,
    0.001993929,
    0.030668786,
    -0.003629653,
    0.012155036,
    -0.020780986,
    -0.001452897,
    -0.013055743,
    0.04334145,
    0.024558844,
    -0.013361826,
    0.036437705,
    0.046494178,
    -0.024354365,
    0.012572594,
    0.026739897,
    0.040159885,
    -0.083921842,
    0.033766948,
    0.019792566,
    0.020305736,
    -0.041611712,
    -0.054348487,
    -0.037831362,
    -0.034957461,
    -0.017648675,
    0.035401277,
    -0.029966526,
    0.010809856,
    -0.034851834,
    -0.011980337,
    -0.001723218,
    -0.009619948,
    0.004474227,
    0.041513246,
    0.015495759,
    0.019903155,
    0.007490522,
    0.009867537,
    -0.003988892,
    -0.016206725,
    -0.025892487,
    0.011483314,
    0.003275429,
    -0.004057011,
    -0.000610861,
    0.0184919,
    -0.027424838,
    -0.002341985,
    0.044852778,
    0.069112629,
    -0.000357707,
    0.093167633,
    0.032693081,
    0.017292822,
    0.042529076,
    0.003583227,
    -0.001936774,
    -0.008280478,
    -0.0078429,
    -0.019866012,
    -0.010603015,
    -0.058366437,
    0.042023845,
    0.040796399,
    -0.029582754,
    -0.007689755,
    0.013966396,
    -0.03205651,
    -0.015408466,
    -0.014211988,
    -0.027778223,
    -0.041850831,
    0.001074631,
    -0.038890366,
    -0.023044182,
    -0.001732416,
    0.001543268,
    -0.025907336,
    -0.019819066,
    -0.009923139,
    0.044318903,
    -0.015227756,
    0.033046406,
    -0.04792634,
    0.00538737,
    -0.061887663,
    0.014405049,
    -0.045182545,
    -0.016857972,
    0.007932334,
    -0.011841987,
    0.064707644,
    -0.038706005,
    0.004470543,
    0.001473967,
    0.011625155,
    -0.018836191,
    -0.024410132,
    -0.031363159,
    0.041725799,
    0.002037207,
    0.003860019,
    0.006680075,
    0.018114734,
    -0.014819693,
    0.021213507,
    -0.020435506,
    0.040424474,
    0.019080058,
    -0.00208582,
    -0.061461467,
    -0.017606243,
    -0.005550518,
    -0.027133143,
    -0.012127817,
    -0.087113477,
    -0.004950904,
    -0.023822611,
    0.010710569,
    0.027914263,
    -0.012295616,
    -0.071240656,
    -0.015066137,
    0.029293826,
    0.005803603,
    0.011727972,
    0.005617022,
    0.024575092,
    -0.025258275,
    -0.030784799,
    0.055404171,
    -0.003181073,
    -0.010430923,
    -0.039209325,
    -0.007764012,
    -0.037610836,
    0.030228525,
    -0.044442676,
    0.01922816,
    -0.005907892,
    0.00703221,
    -0.021957664,
    -0.007169159,
    0.028883073,
    -0.008250051,
    -0.01582063,
    0.025884174,
    -0.040473003,
    -0.024682701,
    0.016798792,
    -0.011024575,
    -0.00478029,
    -0.011229974,
    0.06703496,
    0.013317676,
    -0.029273793,
    0.03029231,
    -0.003405473,
    0.04766129,
    -0.028441999,
    0.022074174,
    0.011821169,
    -0.014018089,
    -0.053497352,
    -0.033777859,
    -0.014468054,
    0.003553688,
    -0.062836356,
    0.010574339,
    -0.05330031,
    -0.025975652,
    0.001352309,
    -0.012198253,
    -0.018476339,
    -0.034762099,
    0.039424308,
    0.005987659,
    -0.002143518,
    -0.04353787,
    0.000228233,
    0.025414314,
    0.016699851,
    -0.020435791,
    -0.007518419,
    0.013658676,
    0.016372278,
    0.020400001,
    -0.031464573,
    -0.05890967,
    0.052890424,
    -0.006104654,
    -0.042624306,
    0.002434331,
    0.062175475,
    0.035878535,
    -0.015888309,
    -0.003093186,
    0.049026955,
    0.02295772,
    -0.009573526,
    0.061590124,
    0.008511071,
    0.088050857,
    -0.004733458,
    0.032404609,
    0.043288574,
    -0.040214036,
    0.027497422,
    -0.03971665,
    0.00926177,
    -0.035255466,
    -0.005740212,
    0.003493177,
    0.036792528,
    -0.054657433,
    -0.072595648,
    0.005552116,
    -0.042500075,
    0.001836312,
    0.004712333,
    0.006385669,
    0.012378817,
    0.040005438,
    -0.031641949,
    -0.02171954,
    -0.017472569,
    -0.00281133,
    -0.001976267,
    0.000942077,
    -0.039002664,
    0.053486671,
    -0.04046528,
    -0.026887059,
    0.007174527,
    -0.016501939,
    -0.009185703,
    0.014843201,
    -0.041123115,
    -0.032409396,
    0.0124129,
    0.034170393,
    0.006600945,
    0.028150916,
    -0.064146027,
    -0.030561317,
    -0.022164177,
    -0.011984802,
    0.018292055,
    -0.020675737,
    -0.014487478,
    -0.012730231,
    0.013813181,
    -0.034839384,
    0.005133045,
    0.029207073,
    0.009691404,
    0.021936329,
    -0.065805741,
    -0.019213712,
    0.04867987,
    0.008186816,
    -0.008141257,
    0.004775892,
    0.000190634,
    -0.051555108,
    -0.008306131,
    -0.035007935,
    -0.054610368,
    0.000200802,
    0.033307642,
    0.041720551,
    -0.031134892,
    -0.01477456,
    0.005594044,
    0.029502409,
    0.008705888,
    0.008345378,
    -0.027790133,
    0.04484323,
    -0.001679631,
    0.004485169,
    0.014115033,
    0.026249513,
    -0.006377864,
    -0.007340994,
    -0.015919102,
    -0.001536968,
    0.002538759,
    0.005496359,
    -0.036156189,
    -0.034071967,
    -0.022705087,
    0.053175796,
    0.020452995,
    -0.012267055,
    0.028648594,
    0.003629993,
    0.002119087,
    0.016466539,
    -0.027306227,
    0.02911447,
    -0.018951982,
    0.048125483,
    0.009896459,
    -0.02372014,
    0.016790893,
    0.050729826,
    0.040084593,
    0.055680629,
    0.069393523,
    0.020310426,
    -0.032511391,
    -0.044545583,
    0.008809663,
    -0.001676198,
    0.022779787,
    0.029079041,
    0.005833769,
    -0.018010732,
    -0.049405284,
    -0.049406804,
    -0.017906182,
    0.029833227,
    0.019787507,
    -0.019739784,
    -0.037790786,
    0.014457069,
    -0.01109104,
    0.042704683,
    -0.021042198,
    -0.044541568,
    -0.023948587,
    0.014797591,
    0.026232973,
    -0.01274611,
    -0.000166255,
    0.062611796,
    0.025276463,
    -0.041247968,
    0.025981966,
    -0.011919325,
    -0.028744921,
    -0.019039793,
    -0.044996992,
    0.040626518,
    0.019482775,
    0.046608634,
    -0.010486885,
    -0.019866539,
    -0.002739898,
    0.003309465,
    0.01839418,
    0.01635842,
    0.012118344,
    -0.012044896,
    -0.015060552,
    -0.01376469,
    -0.040833287,
    -0.010500177,
    0.021336351,
    0.008653956,
    0.009526639,
    0.028290093,
    0.049645375,
    -0.008209069,
    0.011275158,
    0.022720875,
    0.015682487,
    0.042747259,
    0.043392193,
    -0.007748542,
    -0.024904918,
    0.026315978,
    -0.032853965,
    -0.015484242,
    0.03396963,
    -0.00782111,
    -0.07759501,
    -0.014217475,
    0.010504749,
    -0.000137049,
    0.026743541,
    -0.008739206,
    -0.002548767,
    -0.042044725,
    -0.046173126,
    0.083616383,
    -0.004932787,
    -0.004951563,
    -0.011980545,
    -0.000918882,
    0.061748862,
    0.016305916,
    -0.018192705,
    0.006138573,
    -0.014523192,
    -0.018478243,
    -0.002980157,
    0.002872548,
    0.003598219,
    0.033156622,
    0.049870167,
    0.002350837,
    -0.016686657,
    -0.023271507,
    0.015357311,
    0.00559938,
    0.014173292,
    0.017202497,
    -0.009246983,
    0.029712422,
    -0.014123943,
    0.072695374,
    0.006887591,
    0.024505313,
    0.021642039,
    0.009987107,
    0.03490961,
    0.041458201,
    0.005816039,
    -0.023237074,
    0.031831194,
    -0.052623302
  ],
  "metadata": {
    "language": "cs",
    "type": "commit_diff"
  },
  "payload": {
    "type": "commit_diff",
    "diff_type": "modified",
    "commit_hash": "e9f60bf37b6d875c8108422c6f2bd0dc4167303f",
    "commit_timestamp": 1754659383,
    "commit_date": "2025-08-08",
    "commit_message": "Phase 5: Complete SQL INDEX operations and comprehensive testing\n\nMajor additions:\n- Full CREATE INDEX/DROP INDEX functionality with metadata persistence\n- Comprehensive SQL executor test suite coveri",
    "author_name": "jsbattig",
    "author_email": "jsbattig@gmail.com",
    "path": "TxtDb.Sql/Services/SqlExecutor.cs",
    "chunk_index": 5,
    "char_start": 0,
    "char_end": 0,
    "project_id": "txt-db",
    "language": "cs",
    "file_extension": "cs"
  },
  "chunk_text": "OP INDEX should be idempotent\n+                // If the index doesn't exist, return success without error\n+                _logger.LogDebug(\"DROP INDEX: Index '{IndexName}' does not exist, returning success (idempotent behavior)\", \n+                    statement.IndexName);\n+            }\n+            else\n+            {\n+                // Drop the index using TxtDb ITable.DropIndexAsync\n+                await targetTable.DropIndexAsync(transaction, statement.IndexName, cancellationToken);\n+                \n+                _logger.LogDebug(\"DROP INDEX: Dropped index '{IndexName}' from table '{TableName}'\", \n+                    statement.IndexName, targetTable.Name);\n+            }\n+            \n+            return new SqlResult\n+            {\n+                StatementType = SqlStatementType.DropIndex,\n+                AffectedRows = 0, // DROP INDEX doesn't affect rows\n+                Columns = Array.Empty<SqlColumnInfo>(),\n+                Rows = Array.Empty<object[]>()\n+            };\n+        }\n+        catch (Exception ex) when (!(ex is SqlExecutionException))\n+        {\n+            throw new SqlExecutionException(\n+                $\"Failed to drop index '{statement.IndexName}': {ex.Message}\", \n+                $\"DROP INDEX {statement.IndexName}\");\n+        }\n+    }\n+    \n+    /// <summary>\n+    /// Gets all tables in the database for DROP INDEX operations.\n+    /// This is a helper method to find which table contains a specific index.\n+    /// </summary>\n+    private async Task<IList<ITable>> GetAllTablesInDatabase(IDatabaseTransaction transaction, CancellationToken cancellationToken)\n+    {\n+        var tables = new List<ITable>();\n+        var tableNames = await _database.ListTablesAsync(cancellationToken);\n+        \n+        foreach (var tableName in tableNames)\n+        {\n+            var table = await _database.GetTableAsync(tableName, cancellationToken);\n+            if (table != null)\n+            {\n+                tables.Add(table);\n+            }\n+        }\n+        \n+        return tables;\n+    }\n+    \n     /// <summary>\n     /// Simple query filter that matches all objects.\n     /// Used for SELECT statements without WHERE clauses.\n     /// </summary>\n     private class MatchAllQueryFilter : IQueryFilter"
}