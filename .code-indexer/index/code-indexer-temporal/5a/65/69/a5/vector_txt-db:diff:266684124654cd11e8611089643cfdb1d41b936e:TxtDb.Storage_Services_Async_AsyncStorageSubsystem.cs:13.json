{
  "id": "txt-db:diff:266684124654cd11e8611089643cfdb1d41b936e:TxtDb.Storage/Services/Async/AsyncStorageSubsystem.cs:13",
  "vector": [
    -0.014485396,
    0.006470188,
    0.002195009,
    0.043438952,
    -0.046178598,
    -0.031892598,
    -0.001602485,
    -0.051936667,
    0.044626713,
    0.028446589,
    0.032310672,
    0.001790206,
    0.058096014,
    -0.043651223,
    -0.065924697,
    -0.03485224,
    0.024078492,
    -0.010196326,
    -0.057988182,
    -0.001246166,
    -0.012149681,
    -0.075131051,
    -0.050220504,
    0.059537265,
    -0.037434813,
    0.002470784,
    0.026918327,
    0.012586904,
    0.030960446,
    0.018533556,
    -0.011617995,
    -0.090248533,
    -0.020572804,
    0.039871406,
    0.026575001,
    -0.006577031,
    -0.04945093,
    0.002488671,
    0.020580787,
    -0.009532926,
    0.00866169,
    -0.024271112,
    0.082815289,
    -0.030228227,
    -0.005444485,
    -0.034354679,
    0.022348681,
    -0.02974798,
    -0.009323598,
    -0.026530217,
    -0.011288898,
    -0.026425509,
    9.1266e-05,
    0.003473747,
    -0.023304379,
    -0.04283382,
    0.1029393,
    0.009239813,
    -0.070626505,
    0.031837765,
    0.009384385,
    0.020390579,
    0.003256881,
    0.040085204,
    -0.053271376,
    -0.029663589,
    -0.023756713,
    0.021423122,
    -0.019624332,
    -0.056824096,
    0.021386355,
    0.018329756,
    -0.031400573,
    0.012290829,
    0.053785224,
    0.016692508,
    0.019122697,
    0.009631577,
    0.047865503,
    0.008118169,
    -0.024734356,
    -0.059548128,
    0.018257044,
    0.010612248,
    0.01817102,
    -0.052021865,
    0.002928542,
    -0.038364485,
    0.019899098,
    -0.009148849,
    -0.036372956,
    0.012793913,
    0.039820518,
    -0.015072145,
    0.031391192,
    0.026142219,
    0.041736241,
    0.015277036,
    -0.013757275,
    -0.020534247,
    0.00704395,
    0.006361777,
    -0.007579465,
    0.077759236,
    -0.062730201,
    -0.017333888,
    -0.014637715,
    -0.059644639,
    0.033796713,
    0.053536765,
    0.009866155,
    0.032089885,
    -0.000989318,
    0.008389723,
    0.002650528,
    -0.004505727,
    0.009933778,
    0.018985048,
    -0.024395604,
    0.02903492,
    -0.052880887,
    0.026634417,
    -0.05223522,
    0.032168403,
    -0.032279283,
    0.042774376,
    0.020361634,
    0.024749653,
    0.04989453,
    -0.020147594,
    -0.004983636,
    -0.020945214,
    -0.019845929,
    0.042446055,
    -0.013675437,
    0.043551803,
    0.038591966,
    0.007884387,
    -0.002670328,
    -0.039599847,
    0.004301969,
    0.003731763,
    -0.015910696,
    0.009527095,
    -0.008326533,
    0.026947491,
    0.048805833,
    -0.005146868,
    0.003864534,
    -0.059511963,
    -0.019289078,
    0.042601496,
    -0.038202044,
    0.001330871,
    -0.002519243,
    0.013266535,
    -0.038210157,
    -0.034407649,
    -0.026075408,
    -6.4356e-05,
    -0.02603499,
    0.021872263,
    -0.026829587,
    0.026175285,
    -0.01662126,
    0.01678356,
    0.029017383,
    0.028279558,
    0.052298982,
    -0.03890577,
    -0.046798203,
    0.022163518,
    -0.062878415,
    -0.024957476,
    -0.026000047,
    0.033116974,
    -0.002153161,
    0.02622021,
    -0.056233749,
    -0.041619208,
    0.041898441,
    -0.031473011,
    0.004366714,
    0.008753496,
    0.007670099,
    -0.010318019,
    0.042197116,
    0.008875332,
    0.025166545,
    -0.005491831,
    -0.02910834,
    0.002489512,
    -0.048966616,
    -0.017617503,
    0.008864506,
    -0.028309463,
    -0.027599985,
    -0.00261713,
    0.013241724,
    0.032588039,
    -0.057128027,
    0.027599121,
    -0.084947586,
    -0.016976729,
    0.014715663,
    -0.026293958,
    -0.039240289,
    0.010494087,
    0.02638562,
    0.005842078,
    0.004369692,
    0.022932755,
    0.003072396,
    -0.004101862,
    0.067187764,
    0.019273721,
    -0.02847836,
    -0.00243713,
    0.01180034,
    -0.008061596,
    0.003418263,
    -0.018956069,
    0.045282703,
    0.067943648,
    0.00204302,
    -0.057633873,
    -0.027511545,
    -0.048106752,
    -0.015042379,
    -0.015499503,
    0.015854461,
    -0.012615684,
    0.020801947,
    -0.006260019,
    -0.05505231,
    0.060163636,
    -0.015499583,
    -0.020378022,
    -0.004557888,
    -0.029985592,
    -0.012585107,
    0.061095182,
    0.004107525,
    0.035260275,
    -0.020624997,
    0.019096835,
    0.072020926,
    -0.00378968,
    -0.045916095,
    0.00319223,
    -0.044393782,
    -0.023973675,
    -0.030225171,
    0.11745175,
    0.070445299,
    0.025131447,
    -0.017260313,
    0.062274501,
    -0.00085383,
    0.015789904,
    0.024271995,
    0.009672087,
    0.004219119,
    0.028157199,
    -0.008754715,
    -0.001220582,
    -0.043230671,
    -0.029668694,
    0.019028258,
    0.03744838,
    0.027803017,
    0.029604986,
    0.017950514,
    0.001281387,
    -0.00937558,
    -0.048014641,
    0.011735582,
    0.017820198,
    0.004917871,
    0.003733452,
    -0.049822986,
    0.00170487,
    0.009735798,
    -0.012403309,
    -0.028573686,
    -0.02823309,
    -0.015758654,
    -0.004406557,
    0.030261628,
    -0.008807658,
    0.008975095,
    -0.026696745,
    -0.010740936,
    -0.015216822,
    0.017381411,
    0.023407759,
    0.007345252,
    -0.022961745,
    0.039326657,
    -0.011125177,
    -0.036144584,
    0.022336019,
    0.0753759,
    0.044283114,
    0.007260921,
    0.019021679,
    0.02167549,
    -0.019719187,
    0.042848051,
    0.019573443,
    -0.069586478,
    -0.001640083,
    0.02190618,
    0.007073365,
    0.018801425,
    -0.058924511,
    -0.053132173,
    -0.006901233,
    -0.002604822,
    0.031639457,
    0.022139018,
    -0.027946267,
    0.031645615,
    -0.022065982,
    -0.021627814,
    0.028554987,
    -0.064214513,
    -0.013575524,
    0.04641261,
    -0.028502347,
    -0.014918931,
    0.039015796,
    -0.025155118,
    0.061876487,
    0.006265963,
    0.025675917,
    -0.045589264,
    0.00330824,
    -0.02766728,
    0.027962148,
    -0.019452477,
    -0.020077683,
    0.056959342,
    -0.012420388,
    0.050923645,
    -0.009798711,
    0.001373665,
    -0.008575859,
    -0.023611411,
    0.058728531,
    0.00256717,
    -0.048925627,
    -0.020930797,
    0.006219016,
    -0.057686225,
    0.024816228,
    -0.036690596,
    0.015549606,
    -0.018524772,
    0.00712263,
    0.045505535,
    0.039300252,
    -0.03611758,
    -0.036951732,
    0.020070152,
    0.031681906,
    -0.016197419,
    0.048226114,
    -0.042001441,
    0.017259017,
    -0.030361803,
    -0.043429472,
    -0.026471538,
    0.016321108,
    0.006057302,
    -0.000716741,
    0.040674299,
    -0.008185691,
    0.001781109,
    -0.042547077,
    0.003119266,
    0.031840954,
    -0.026405672,
    0.014266931,
    0.001034501,
    -0.008027774,
    0.053654488,
    0.0448143,
    -0.013136419,
    0.021954242,
    0.010134436,
    0.018356005,
    0.016639603,
    0.020528901,
    0.008130978,
    -0.016045298,
    -0.022794373,
    0.016240798,
    0.021326464,
    -0.023108048,
    -0.015667474,
    -0.021833349,
    0.035876203,
    -0.046106786,
    0.032803431,
    0.012337546,
    0.019019272,
    0.04242333,
    -0.052159615,
    0.048374441,
    0.022281805,
    0.013477472,
    -0.011848219,
    0.032906432,
    0.001372228,
    0.049363479,
    -0.016620323,
    -0.013983414,
    0.010696273,
    -0.015277502,
    -0.006109327,
    -0.029059198,
    0.001154464,
    -0.024383029,
    -0.032996412,
    0.016837232,
    0.01990146,
    -0.086418927,
    -0.013738236,
    -0.019429212,
    -0.016370803,
    -0.014564103,
    -0.018592598,
    -0.003060364,
    0.046900835,
    -0.038931895,
    0.018288709,
    -0.033025257,
    -0.056247089,
    -0.027326336,
    -0.016014572,
    -0.036706459,
    0.060889184,
    -0.006652844,
    -0.009461298,
    -0.040251121,
    -0.01133541,
    0.063624576,
    -0.03682797,
    -0.029283894,
    -0.037936065,
    -0.013035694,
    -0.030291203,
    0.001916743,
    0.036172945,
    -0.023359362,
    -0.047312092,
    0.044332154,
    -0.003213441,
    -0.014908298,
    -0.030989187,
    -0.017813114,
    -0.013802396,
    0.005555836,
    -0.015215635,
    0.011076252,
    0.018401293,
    -0.059836376,
    -0.006804755,
    0.003047232,
    0.043121874,
    -0.032112386,
    0.006469978,
    0.005695541,
    0.043614034,
    0.023427648,
    -0.023817008,
    0.061866734,
    -0.019732257,
    -0.032776777,
    -0.042014327,
    -0.054068048,
    -0.04361815,
    -0.032369822,
    -0.026022017,
    0.032708585,
    -0.033161543,
    0.039488427,
    0.056395587,
    -0.040411767,
    -0.011396479,
    0.00307773,
    0.002120427,
    0.009359468,
    -0.008969937,
    -0.014511979,
    -0.021262305,
    0.003256944,
    -0.046450794,
    0.041040454,
    0.023946878,
    -0.059807852,
    0.017328998,
    -0.007284176,
    -0.019454865,
    0.040562376,
    0.021325435,
    -0.021101695,
    -0.050944302,
    0.031393964,
    -0.023435015,
    -0.038076181,
    -0.018924186,
    0.026453819,
    0.009308819,
    -0.024916679,
    -0.022280464,
    -0.006114381,
    0.025849788,
    0.012046787,
    0.035893157,
    0.026186109,
    -0.017160775,
    -0.062224265,
    0.007076095,
    -0.027172595,
    0.010232532,
    0.007166348,
    0.00481041,
    -0.027819026,
    -0.014514244,
    0.045710888,
    -0.012182373,
    -0.025375441,
    0.000472864,
    0.018173764,
    0.025064133,
    0.0013053,
    0.009214399,
    -0.022368195,
    -0.032795981,
    -0.021204397,
    -0.035533395,
    -0.037821118,
    -0.022508111,
    -0.008316914,
    -0.009797341,
    0.045408931,
    -0.011736314,
    -0.016456792,
    -0.008495403,
    0.00804237,
    0.041134458,
    0.04172264,
    -0.019199647,
    0.0343691,
    0.031650089,
    -0.004150165,
    0.048388593,
    -0.017218044,
    0.055432387,
    0.022019422,
    0.009029993,
    0.035892516,
    -0.025612792,
    -0.012028799,
    0.026559791,
    -0.021499474,
    -0.013572045,
    -0.044900835,
    -0.014417997,
    -0.003863853,
    0.01200512,
    0.015469749,
    -0.00312522,
    0.03309847,
    0.077289484,
    -0.067334026,
    -0.025678856,
    0.005110609,
    -0.017761063,
    0.013200217,
    0.017083896,
    0.029776294,
    -0.037020862,
    -0.083281204,
    0.034853727,
    0.013383772,
    -0.028376374,
    -0.014644899,
    0.016036756,
    -0.027743457,
    -0.001469304,
    -0.077785946,
    0.05582751,
    -0.000589369,
    -0.020937776,
    -0.015150865,
    -0.012579883,
    -0.01095294,
    3.5394e-05,
    0.014408239,
    0.04192983,
    0.016630273,
    -0.014871792,
    -0.025883805,
    0.023716554,
    0.017322054,
    0.051540036,
    0.069418661,
    0.00593808,
    -0.014408586,
    0.049200904,
    -0.0195146,
    0.041022517,
    0.037435215,
    0.034587726,
    -0.060414717,
    -0.001274564,
    0.031823881,
    0.000200599,
    -0.048007555,
    0.01239806,
    0.007744066,
    0.016511006,
    -0.01279947,
    0.012261705,
    -0.027883673,
    -0.014540303,
    0.010478331,
    -0.00527657,
    0.038943712,
    -0.055890847,
    0.032072041,
    0.030034231,
    0.004284899,
    0.010864761,
    0.002140207,
    0.010251434,
    -0.003814176,
    -0.04123785,
    -0.017681997,
    0.024685217,
    0.050883163,
    0.00463862,
    0.019711077,
    0.034848455,
    -0.049771186,
    -0.039311867,
    0.058417052,
    0.03796754,
    0.013731706,
    0.064603135,
    0.028617701,
    0.067620158,
    0.028313503,
    0.009830753,
    0.008505968,
    -0.028757982,
    0.009739504,
    -0.037067335,
    -0.025652347,
    0.002834562,
    0.04936808,
    0.043399271,
    -0.025827818,
    -0.014311376,
    0.006793629,
    -0.032077257,
    -0.014946955,
    -0.020643294,
    0.011996967,
    0.020365909,
    -0.033263881,
    0.000348663,
    -0.039447196,
    -0.021827841,
    0.008161198,
    0.021514734,
    -0.000967381,
    0.018295536,
    0.055699702,
    0.006931319,
    -0.014727901,
    -0.038493972,
    9.557e-05,
    -0.01325736,
    0.019956732,
    -0.007538902,
    -0.028307427,
    -0.022704931,
    -0.011189354,
    0.079966091,
    -0.050045829,
    0.004175479,
    -0.006031625,
    0.001156643,
    0.009536732,
    -0.051440738,
    -0.053762916,
    0.012744755,
    0.026622733,
    -0.001690012,
    -0.003633272,
    0.026512433,
    -0.027769955,
    -0.022538271,
    0.002561442,
    0.0748946,
    0.036152508,
    0.018296663,
    -0.040072221,
    0.003165036,
    0.027906813,
    -0.007614518,
    0.01727856,
    -0.03564341,
    -0.022268033,
    0.004509214,
    0.018555211,
    0.017863855,
    0.006849673,
    -0.079365484,
    -0.010986232,
    -0.011841086,
    -0.012755051,
    -0.012238804,
    -0.010474484,
    0.063646287,
    -0.014183111,
    -0.029514967,
    -0.019019285,
    0.021258267,
    0.022678601,
    -0.048601907,
    0.008954523,
    -0.03800793,
    0.049424477,
    -0.021565855,
    -0.014080255,
    0.05465338,
    0.001531341,
    -0.025612509,
    0.000517293,
    0.011772935,
    -0.032676574,
    -0.011582269,
    0.012126438,
    0.013077891,
    -0.089522809,
    -0.007931931,
    -0.013982049,
    0.018254852,
    -0.00668983,
    0.044300146,
    -0.034403142,
    -0.019541303,
    0.056177903,
    -0.037681103,
    0.052482989,
    -0.017814172,
    0.040669862,
    0.012556859,
    -0.023588529,
    -0.024426023,
    -0.024160784,
    0.01431844,
    0.026091177,
    -0.076399252,
    0.005309557,
    -0.025314726,
    -0.005182732,
    -0.032872804,
    -0.020044362,
    -0.013815767,
    -0.039441761,
    -0.00339669,
    0.029681655,
    -0.022701815,
    0.011692096,
    0.003642245,
    0.017450614,
    0.042867951,
    -0.017290734,
    -0.037459888,
    0.02266648,
    0.012953415,
    0.036871552,
    -0.029053591,
    -0.075198218,
    0.035805374,
    -0.011676987,
    -0.024507606,
    0.014289808,
    0.017178528,
    0.007880527,
    -0.06711597,
    0.003234469,
    -0.009123469,
    -0.026259964,
    -0.030685782,
    0.042728435,
    0.03185422,
    0.031169796,
    -0.030402925,
    0.009367389,
    0.037442293,
    -0.008169502,
    0.061749522,
    0.023195827,
    -0.004452792,
    -0.035769504,
    -0.011451568,
    -0.007367474,
    0.043599382,
    -0.022392426,
    -0.064632945,
    0.039582919,
    0.008733771,
    -0.026905525,
    0.011411845,
    0.033589751,
    -0.020530496,
    0.025478233,
    0.00674248,
    0.012356424,
    -0.000162227,
    0.012709923,
    -0.01169653,
    -0.008721217,
    -0.022519307,
    0.023222759,
    0.026017623,
    -0.017312979,
    0.027411588,
    -0.002196262,
    -0.008059021,
    0.054528251,
    -0.00804366,
    -0.047643412,
    0.021224946,
    0.008321624,
    0.018319588,
    0.035796128,
    -0.05532483,
    -0.033498898,
    0.008152509,
    0.00056438,
    -0.031835813,
    -0.000639769,
    0.020626342,
    -0.013980882,
    -0.007847988,
    -0.023927612,
    -0.03843198,
    0.060999624,
    -0.031382091,
    0.035915352,
    -0.046187874,
    -0.021180967,
    0.07001467,
    -0.024258366,
    -0.014992817,
    -0.002700338,
    -0.012039867,
    -0.020608583,
    0.032697555,
    -0.020089779,
    -0.036462046,
    -0.047493435,
    -0.006699427,
    0.0382776,
    -0.055630855,
    -0.014819666,
    0.030797826,
    -0.003000055,
    0.017336128,
    0.007260541,
    -0.000366107,
    -0.0117189,
    -0.002830707,
    0.011392532,
    0.007343568,
    0.018141596,
    0.00346555,
    -0.015747249,
    -0.037169781,
    -0.061191238,
    -0.006028549,
    0.019596005,
    -0.048264761,
    -0.004037153,
    -0.002158464,
    0.007770243,
    0.038173266,
    0.040709238,
    0.010149161,
    -0.019196676,
    -0.002485321,
    0.032568716,
    0.020247046,
    0.015971703,
    -0.010240802,
    0.037214741,
    0.076016508,
    -0.007577503,
    -0.005486598,
    -0.000711362,
    -0.008384387,
    0.045803942,
    0.023253953,
    -0.02034314,
    -0.003561896,
    -0.053149331,
    -0.019508181,
    0.002719884,
    0.037279736,
    0.035328932,
    0.015590734,
    -0.069144815,
    0.003353858,
    -0.026961116,
    0.002324606,
    0.016223961,
    0.004224655,
    -0.015841402,
    -0.063284531,
    -0.025556663,
    -0.034728311,
    0.027511552,
    -0.021806607,
    -0.013066204,
    -0.020805269,
    -0.009159488,
    0.000616062,
    -0.004474267,
    -0.019197337,
    0.054558434,
    0.042961329,
    -0.045049746,
    0.016242605,
    -0.017862761,
    -0.054478996,
    -0.014984442,
    -0.028836098,
    0.037297148,
    0.001857682,
    0.031763021,
    -0.012589009,
    0.002076868,
    0.014562136,
    -0.000579208,
    0.019167894,
    0.007976564,
    0.013006767,
    0.043843586,
    0.003871451,
    -0.011702883,
    -0.05605194,
    -0.009318925,
    0.031154951,
    -0.004785329,
    0.044173583,
    0.028515711,
    0.019354565,
    -0.011669738,
    0.028703462,
    0.020811012,
    0.00089088,
    0.050514225,
    0.006128205,
    -0.003147487,
    -0.065935738,
    -0.005985224,
    -0.023083592,
    -0.001956712,
    0.033409778,
    -0.012092152,
    -0.050416932,
    0.012087189,
    0.01260908,
    0.025824472,
    0.02683283,
    -0.029963523,
    -0.008776655,
    -0.054311536,
    -0.021212129,
    0.045481045,
    -0.055170722,
    -0.019411165,
    -0.064154923,
    0.008765895,
    0.004508304,
    0.035786111,
    -0.004281242,
    0.004385678,
    -0.051024899,
    -0.024369946,
    -0.004829017,
    -0.012254226,
    0.064294741,
    0.00543699,
    0.029787289,
    0.02556614,
    0.002462771,
    -0.01026101,
    0.029304238,
    -0.002822771,
    0.055268824,
    0.053015329,
    -0.006985232,
    0.017587818,
    0.011806305,
    0.032806929,
    -0.025766555,
    -0.014293845,
    0.018902181,
    -0.046347376,
    0.009133625,
    -0.018590987,
    0.003799739,
    -0.041601315,
    0.02233449,
    -0.060303573
  ],
  "metadata": {
    "language": "cs",
    "type": "commit_diff"
  },
  "payload": {
    "type": "commit_diff",
    "diff_type": "modified",
    "commit_hash": "266684124654cd11e8611089643cfdb1d41b936e",
    "commit_timestamp": 1754539501,
    "commit_date": "2025-08-06",
    "commit_message": "Complete 7-Phase TxtDb System Transformation\n\nMAJOR ACHIEVEMENTS:\n- Transformed system from ~40-50% to 95-100% pass rate\n- Fixed fundamental data visibility issues with JSON type handling\n- Implemente",
    "author_name": "jsbattig",
    "author_email": "jsbattig@gmail.com",
    "path": "TxtDb.Storage/Services/Async/AsyncStorageSubsystem.cs",
    "chunk_index": 13,
    "char_start": 0,
    "char_end": 0,
    "project_id": "txt-db",
    "language": "cs",
    "file_extension": "cs"
  },
  "chunk_text": "d();\n+                \n+                try\n+                {\n+                    // CRITICAL: Use direct FileStream flush with immediate disk commit\n+                    using var fileStream = new FileStream(filePath, FileMode.Open, FileAccess.ReadWrite, FileShare.Read);\n+                    \n+                    // Force both async flush and synchronous disk flush for guaranteed durability\n+                    await fileStream.FlushAsync(cancellationToken).ConfigureAwait(false);\n+                    fileStream.Flush(flushToDisk: true); // Force OS buffer flush to physical disk\n+                }\n+                catch (FileNotFoundException)\n+                {\n+                    // File was deleted between check and flush - this is acceptable\n+                }\n+                catch (UnauthorizedAccessException ex)\n+                {\n+                    throw new IOException($\"Cannot flush {filePath} - insufficient permissions or file locked: {ex.Message}\", ex);\n+                }\n+                catch (Exception ex)\n+                {\n+                    throw new IOException($\"Failed to flush {filePath} directly: {ex.Message}\", ex);\n+                }\n+            });\n+\n+        // Execute all flushes concurrently for maximum speed\n+        await Task.WhenAll(flushTasks).ConfigureAwait(false);\n+    }\n+\n     private async Task PersistMetadataIfDirtyAsync(object? state)\n     {\n         // Skip if not initialized yet\n         if (string.IsNullOrEmpty(_rootPath))\n             return;"
}